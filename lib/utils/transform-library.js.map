{"version":3,"sources":["utils/transform-library.js"],"names":["TransformLibrary","tranforms","_tranforms","name","scriptPath","mod","require","transform","console","warn","getTransform","Error","wrapperMod","jscodeshift"],"mappings":";;;;;;;;;;;;;;AAAA;;;;;;IAEqBA,gB;AACnB,4BAAaC,SAAb,EAAwB;AAAA;;AACtB,SAAKC,UAAL,GAAkBD,SAAlB;AACD;;;;iCAEaE,I,EAAM;AAClB,aAAO,KAAKD,UAAL,CAAgBC,IAAhB,CAAP;AACD;;;2BAEOC,U,EAAY;AAClB,UAAMC,MAAMC,QAAQF,UAAR,CAAZ;AACA,UAAI,OAAOC,GAAP,KAAe,UAAnB,EAA+B;AAC7B,YAAIA,IAAIE,SAAJ,KAAkB,aAAtB,EAAqC;AACnCC,kBAAQC,IAAR,CAAa,sDAAb;AACD;AACD,eAAO,2BAAqBJ,GAArB,EAA0BD,UAA1B,CAAP;AACD;AACD,UAAI,CAACC,IAAIE,SAAT,EAAoB;AAClB,eAAOF,GAAP;AACD;AACD,UAAME,YAAY,KAAKG,YAAL,CAAkBL,IAAIE,SAAtB,CAAlB;AACA,UAAI,CAACA,SAAL,EAAgB;AACd,cAAM,IAAII,KAAJ,iBAAwBN,IAAIE,SAA5B,iBAAN;AACD;AACD,UAAMK,aAAaL,UAAUF,GAAV,EAAeD,UAAf,CAAnB;AACA,aAAOQ,UAAP;AACD;;;2BAEc;AACb,aAAO,IAAIZ,gBAAJ,CAAqB;AAC1Ba;AAD0B,OAArB,CAAP;AAGD;;;;;kBAhCkBb,gB","file":"transform-library.js","sourcesContent":["import JSCodeShiftTransform from '../transform/jscodeshift'\n\nexport default class TransformLibrary {\n  constructor (tranforms) {\n    this._tranforms = tranforms\n  }\n\n  getTransform (name) {\n    return this._tranforms[name]\n  }\n\n  getMod (scriptPath) {\n    const mod = require(scriptPath)\n    if (typeof mod === 'function') {\n      if (mod.transform !== 'jscodeshift') {\n        console.warn('Landscaper: Intepreting mod as jscodeshift script...')\n      }\n      return JSCodeShiftTransform(mod, scriptPath)\n    }\n    if (!mod.transform) {\n      return mod\n    }\n    const transform = this.getTransform(mod.transform)\n    if (!transform) {\n      throw new Error(`Transform \"${mod.transform}\" not found`)\n    }\n    const wrapperMod = transform(mod, scriptPath)\n    return wrapperMod\n  }\n\n  static auto () {\n    return new TransformLibrary({\n      jscodeshift: JSCodeShiftTransform\n    })\n  }\n}\n"]}